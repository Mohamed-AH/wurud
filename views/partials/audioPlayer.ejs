<!-- Sticky Audio Player -->
<div id="audioPlayer" class="audio-player hidden">
  <audio id="audio" preload="metadata"></audio>

  <div class="player-container">
    <!-- Left: Now Playing Info -->
    <div class="player-info">
      <div class="now-playing-label"><%= locale === 'ar' ? 'ÙŠØªÙ… ØªØ´ØºÙŠÙ„:' : 'Now Playing:' %></div>
      <div class="lecture-title" id="playerLectureTitle">
        <%= locale === 'ar' ? 'Ø§Ø®ØªØ± Ù…Ø­Ø§Ø¶Ø±Ø© Ù„Ù„ØªØ´ØºÙŠÙ„' : 'Select a lecture to play' %>
      </div>
      <div class="sheikh-name" id="playerSheikhName"></div>
    </div>

    <!-- Center: Playback Controls -->
    <div class="player-controls">
      <!-- Time Display -->
      <div class="time-display">
        <span id="currentTime">0:00</span>
        <span class="time-separator">/</span>
        <span id="duration">0:00</span>
      </div>

      <!-- Progress Bar -->
      <div class="progress-container" id="progressContainer">
        <div class="progress-bar" id="progressBar">
          <div class="progress-handle" id="progressHandle"></div>
        </div>
      </div>

      <!-- Control Buttons -->
      <div class="control-buttons">
        <!-- Skip Backward 15s -->
        <button class="control-btn skip-btn" id="skipBackward" title="<%= locale === 'ar' ? 'Ø±Ø¬ÙˆØ¹ 15 Ø«Ø§Ù†ÙŠØ©' : 'Skip backward 15s' %>">
          <span class="skip-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
            </svg>
            <span class="skip-seconds">15</span>
          </span>
        </button>

        <!-- Play/Pause -->
        <button class="control-btn control-btn-primary" id="playPauseBtn">
          <span class="control-icon" id="playPauseIcon">â–¶</span>
        </button>

        <!-- Skip Forward 15s -->
        <button class="control-btn skip-btn" id="skipForward" title="<%= locale === 'ar' ? 'ØªÙ‚Ø¯ÙŠÙ… 15 Ø«Ø§Ù†ÙŠØ©' : 'Skip forward 15s' %>">
          <span class="skip-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="transform: scaleX(-1);">
              <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
            </svg>
            <span class="skip-seconds">15</span>
          </span>
        </button>
      </div>
    </div>

    <!-- Right: Additional Controls -->
    <div class="player-actions">
      <!-- Playback Speed -->
      <div class="speed-control">
        <button class="control-btn control-btn-small" id="speedBtn" title="<%= locale === 'ar' ? 'Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ´ØºÙŠÙ„' : 'Playback speed' %>">
          <span id="speedLabel">1x</span>
        </button>
        <div class="speed-menu hidden" id="speedMenu">
          <button class="speed-option" data-speed="0.5">0.5x</button>
          <button class="speed-option" data-speed="0.75">0.75x</button>
          <button class="speed-option active" data-speed="1">1x</button>
          <button class="speed-option" data-speed="1.25">1.25x</button>
          <button class="speed-option" data-speed="1.5">1.5x</button>
          <button class="speed-option" data-speed="2">2x</button>
        </div>
      </div>

      <!-- Volume Control -->
      <div class="volume-control">
        <button class="control-btn control-btn-small" id="muteBtn" title="<%= locale === 'ar' ? 'ÙƒØªÙ… Ø§Ù„ØµÙˆØª' : 'Mute' %>">
          <span id="volumeIcon">ðŸ”Š</span>
        </button>
        <label for="volumeSlider" class="visually-hidden"><%= locale === 'ar' ? 'Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª' : 'Volume level' %></label>
        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="100" aria-label="<%= locale === 'ar' ? 'Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª' : 'Volume level' %>">
      </div>

      <!-- Download Button -->
      <a class="control-btn control-btn-small download-btn" id="downloadBtn" title="<%= locale === 'ar' ? 'ØªØ­Ù…ÙŠÙ„' : 'Download' %>" style="display:none;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
      </a>

      <!-- Close Button -->
      <button class="control-btn control-btn-small" id="closePlayerBtn" title="<%= locale === 'ar' ? 'Ø¥ØºÙ„Ø§Ù‚' : 'Close' %>">
        <span class="control-icon">âœ•</span>
      </button>
    </div>
  </div>
</div>
